<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}My App{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
</head>
<body class="light-theme">

    <!-- âœ… Navbar -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="/home">Home</a>
            <a href="/analysis">Analytics</a>
            <a href="/Scheduling">Scheduling</a>
            <a href="/logout">Log Out</a>
        </div>
        <div class="nav-right">
            <!-- ðŸ”” Notification Bell -->
            <div class="notification">
                <span class="bell" onclick="toggleReminders()">&#128276;</span>
                {% if unread_count > 0 %}
                    <span class="badge">{{ unread_count }}</span>
                {% endif %}
                <div id="reminderBox" class="reminder-box">
                    <strong>Tasks Due Soon:</strong>
                    <ul>
                        {% for task in due_tomorrow %}
                            <li>{{ task }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <!-- âš™ï¸ Settings Gear -->
            <div class="settings">
                <span class="gear" onclick="toggleSettings()">&#9881;</span>
            </div>
        </div>
    </nav>

    <!-- âœ… Settings Island -->
    <div id="settingsForm">
        <form onsubmit="applySettings(); return false;">
            <h2>Settings</h2>

            <label>Theme:</label><br>
            <select id="themeSelect">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="blue">Blue</option>
            </select><br><br>

            <label>Notifications:</label><br>
            <input type="checkbox" id="notifToggle" checked> Enable reminders<br><br>

            <label>Account:</label><br>
            <button type="button">Manage Account</button><br><br>

            <button type="submit">Confirm</button>
            <button type="button" onclick="hideSettings()">Close</button>
        </form>
    </div>

    <!-- Overlay -->
    <div id="overlay"></div>

    <!-- âœ… Page-specific content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- âœ… Scripts -->
    <script>
    function toggleReminders() {
        const box = document.getElementById("reminderBox");
        box.style.display = box.style.display === "none" ? "block" : "none";
    }
    function toggleSettings() {
        document.getElementById('settingsForm').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }
    function hideSettings() {
        document.getElementById('settingsForm').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }
    function applySettings() {
        const theme = document.getElementById('themeSelect').value;
        document.body.classList.remove('light-theme','dark-theme','blue-theme');
        document.body.classList.add(theme + '-theme');

        const notifEnabled = document.getElementById('notifToggle').checked;
        console.log("Notifications enabled:", notifEnabled);

        hideSettings();
    }
    </script>
</body>
</html>
